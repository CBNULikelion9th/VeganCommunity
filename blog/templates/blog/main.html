{% load static %}
<html>
<head>
<title>Main Map Page</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<link href="{% static 'blog/map.css' %}" rel="stylesheet" />
</head>

<body>  
  <!-- 지도 불러오는 부분 시작 -->
  <!DOCTYPE html>
  <html> 
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
      <style>
          body {
              overflow: hidde6;
          }
          div#map {
              width: 100vw; height: 100vh;
          }
          div.wrap {
              width: 600px;
              height: 450px;
          }
          div.text-box {
              text-align: center;
          }
          
          h4 {
              margin: 10px auto 0;
              font-size:large;
          }
          h5 {
              margin: 10px auto 0;
              font-size:medium;
          }
          div.img-box {
              max-height: 200px;
              max-width: 400;
              overflow: hidden;
          }
          img {
              width: 300px;
              margin: -20px auto 0;
          }
        
          a {
              text-decoration: none;
              color: #000;
          }
          #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #description {
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
      }
 
      #infowindow-content .title {
        font-weight: bold;
      }
 
      #infowindow-content {
        display: none;
      }
 
      #map #infowindow-content {
        display: inline;
      }
 
      .pac-card {
        margin: 10px 10px 0 0;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        background-color: #fff;
        font-family: Roboto;
      }
 
      #pac-container {
        padding-bottom: 12px;
        margin-right: 12px;
      }
 
      .pac-controls {
        display: inline-block;
        padding: 5px 11px;
      }
 
      .pac-controls label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }
 
      #pac-input {
        background-color: #fff;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        margin-left: 12px;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 400px;
      }
 
      #pac-input:focus {
        border-color: #4d90fe;
      }
 
      #title {
        color: #fff;
        background-color: #4d90fe;
        font-size: 25px;
        font-weight: 500;
        padding: 6px 12px;
      }
          
          /* 확대/축소 등 구글 지도의 기본 UI 감추기 */
          .gmnoprint, .gm-control-active.gm-fullscreen-control {
              display: none;
          }
          
      </style>
  </head>
   
  <body>
    <div class="pac-card" id="pac-card">
        <div>
          <div id="title">
            Autocomplete search
          </div>
          <div id="type-selector" class="pac-controls">
            <input type="radio" name="type" id="changetype-all" checked="checked">
            <label for="changetype-all">All</label>
   
            <input type="radio" name="type" id="changetype-establishment">
            <label for="changetype-establishment">Establishments</label>
   
            <input type="radio" name="type" id="changetype-address">
            <label for="changetype-address">Addresses</label>
   
            <input type="radio" name="type" id="changetype-geocode">
            <label for="changetype-geocode">Geocodes</label>
          </div>
          <div id="strict-bounds-selector" class="pac-controls">
            <input type="checkbox" id="use-strict-bounds" value="">
            <label for="use-strict-bounds">Strict Bounds</label>
          </div>
        </div>
        <div id="pac-container">
          <input id="pac-input" type="text"
              placeholder="Enter a location">
        </div>
      </div>
      <div id="map"></div>
      <div id="infowindow-content">
        <img src="" width="16" height="16" id="place-icon">
        <span id="place-name"  class="title"></span><br>
        <span id="place-address"></span>
      </div>

      <div id="map"></div>   
      <script type="text/javascript">
          function initMap() {
   
              //지도 스타일
              //var : 자바스크립트에서 모든 변수의 데이터타입을 표현
              var map = new google.maps.Map(document.getElementById('map'), {
                  
                  //처음 중심 좌표
                  center: {
                      lat: 37, 
                      lng: 126 
                  },                  
                  //처음 줌 값. 숫자가 작을수록 낮은 배율
                  zoom: 8
              });
        var card = document.getElementById('pac-card');
        var input = document.getElementById('pac-input');
        var types = document.getElementById('type-selector');
        var strictBounds = document.getElementById('strict-bounds-selector');
 
        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(card);
 
        var autocomplete = new google.maps.places.Autocomplete(input);
 
        // Bind the map's bounds (viewport) property to the autocomplete object,
        // so that the autocomplete requests use the current map bounds for the
        // bounds option in the request.
        autocomplete.bindTo('bounds', map);
 
        // Set the data fields to return when the user selects a place.
        autocomplete.setFields(
            ['address_components', 'geometry', 'icon', 'name']);             
   
              //마커 정보
              var locations = [
  
                  //place:"청주 여누",
                  ['<div class="wrap"><div class="text-box"><h4>여누</h4><div class="img-box"><img src="{% static "img/2.png" %}"/></div><h5> 충청북도 청주시 흥덕구 복대동 990번지 KR 1층 </h5><h5>별점 4.5</h5><hr><h5>매장 내 식사 ○</h5><h5>테이크 아웃 ○</h5><hr><a target="_blank" href="#/"><h5>리뷰 보기</h5><h5>저장 하기</h5><h5>신고 하기</h5></a></div>', 36.6341916, 127.4249196],
                   //place:"청주 오프리",
                  ['<div class="wrap"><div class="text-box"><h4>오프리</h4><div class="img-box"><img src="{% static "img/1.png" %}"/></div><h5> 충청북도 청주시 흥덕구 가경동 번지 1층 1929 KR 일부호 </h5><h5>별점 4.8</h5><hr><h5>매장 내 식사 ○</h5><h5>테이크 아웃 ○</h5><hr><a target="_blank" href="#/"><h5>리뷰 보기</h5><h5>저장 하기</h5><h5>신고 하기</h5></a></div>',36.6196166,127.4296442],
                    //place:"청주 늘푸른식당",
                  ['<div class="wrap"><div class="text-box"><h4>늘푸른식당</h4><div class="img-box"><img src="{% static "img/3.png" %}"/></div><h5> 충청북도 청주시 상당구 우암동 325-6 </h5><h5>별점 - </h5><hr><h5>매장 내 식사 ○</h5><h5>테이크 아웃 x</h5><hr><a target="_blank" href="#/""><h5>리뷰 보기</h5><h5>저장 하기</h5><h5>신고 하기</h5></a></div>', 36.6481218, 127.479121],
                   //place:"청주 스토리",
                  ['<div class="wrap"><div class="text-box"><h4>스토리</h4><div class="img-box"><img src="{% static "img/4.png" %}"/></div><h5>충청북도 청주시 흥덕구 복대2동 </h5><h5>별점 4.9</h5><hr><h5>매장 내 식사 ○</h5><h5>테이크 아웃 ○</h5><hr><a target="_blank" href="#/""><h5>리뷰 보기</h5><h5>저장 하기</h5><h5>신고 하기</h5></a></div>', 36.6316732, 127.4318127],
                   //place:"청주 하일",
                  ['<div class="wrap"><div class="text-box"><h4>하일</h4><div class="img-box"><img src="{% static "img/5.png" %}"/></div><h5> 충청북도 청주시 상당구 북문로1가 번지 3층 4-1 KR 반비반트</h5><h5>별점 5.0</h5><hr><h5>매장 내 식사 x</h5><h5>테이크 아웃 ○</h5><hr><a target="_blank" href="#/"><h5>리뷰 보기</h5><h5>저장 하기</h5><h5>신고 하기</h5></a></div>', 36.6481164,127.4528564],
  
            ]     
              
              //마커 이미지
              var customicon = 'http://drive.google.com/uc?export=view&id=1tZgPtboj4mwBYT6cZlcY36kYaQDR2bRM'
   
              //인포윈도우 : 텍스트를 올릴 수 있는 말풍선 모양의 이미지
              var infowindow = new google.maps.InfoWindow();
   
              //마커 생성
              var marker, i;
              for (i = 0; i < locations.length; i++) {
                  marker = new google.maps.Marker({
                      
                      //마커의 위치
                      position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                      
                      //마커 아이콘
                      // icon: customicon,
                      
                      //마커를 표시할 지도
                      map: map
                  });
   
                  google.maps.event.addListener(marker, 'click', (function(marker, i) {
                      return function() {
                          
                          //html로 표시될 인포 윈도우의 내용
                          infowindow.setContent(locations[i][0]);
                          
                          //인포윈도우가 표시될 위치
                          infowindow.open(map, marker);
                      }
                  })(marker, i));
                  
                  if (marker) {
                      marker.addListener('click', function() {
                          
                          //중심 위치를 클릭된 마커의 위치로 변경
                          map.setCenter(this.getPosition());
   
                          //마커 클릭 시의 줌 변화 - 숫자가 작을수록 배율이 낮음
                          map.setZoom(14);
                      });
                  }
              }
              autocomplete.addListener('place_changed', function() {
          infowindow.close();
          marker.setVisible(false);
          var place = autocomplete.getPlace();
          if (!place.geometry) {
            // User entered the name of a Place that was not suggested and
            // pressed the Enter key, or the Place Details request failed.
            window.alert("No details available for input: '" + place.name + "'");
            return;
          }
 
          // If the place has a geometry, then present it on a map.
          if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
          } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);  // Why 17? Because it looks good.
          }
          marker.setPosition(place.geometry.location);
          marker.setVisible(true);
 
          var address = '';
          if (place.address_components) {
            address = [
              (place.address_components[0] && place.address_components[0].short_name || ''),
              (place.address_components[1] && place.address_components[1].short_name || ''),
              (place.address_components[2] && place.address_components[2].short_name || '')
            ].join(' ');
          }
 
          infowindowContent.children['place-icon'].src = place.icon;
          infowindowContent.children['place-name'].textContent = place.name;
          infowindowContent.children['place-address'].textContent = address;
          infowindow.open(map, marker);
        });
 
        // Sets a listener on a radio button to change the filter type on Places
        // Autocomplete.
        function setupClickListener(id, types) {
          var radioButton = document.getElementById(id);
          radioButton.addEventListener('click', function() {
            autocomplete.setTypes(types);
          });
        }
 
        setupClickListener('changetype-all', []);
        setupClickListener('changetype-address', ['address']);
        setupClickListener('changetype-establishment', ['establishment']);
        setupClickListener('changetype-geocode', ['geocode']);
 
        document.getElementById('use-strict-bounds')
            .addEventListener('click', function() {
              console.log('Checkbox clicked! New state=' + this.checked);
              autocomplete.setOptions({strictBounds: this.checked});
            });
      
        }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAjM9mpO9_qqSTjiOSnyPy5ssVsAfb3NsY&libraries=places&callback=initMap"
        async defer></script>

    
          }
        
      </script>
      
     
      
  </body></html>
  

   <!-- 지도 불러오는 부분 끝-->

   <!-- 왼쪽 배너 -->
   <leftbody>

    <section id="up-mainfunc">
        <div class="maplogo_up">
          We are Vegan
          <div class="add_store">
            <a href="{% url 'vegan_area_add' %}">비건도 먹을 수 있는 음식점! 추가하기</a>
          </div> 
          <div class="search_store">
            <input type="search" value="" >
            <input type="submit" value="검색">
          </div>         
          <div class="menu-list">            
            <div class="menu">
              <a href="{% url 'vegan_info' %}">info</a>
            </div> 
            <div class="menu">
                <a href="#">음식점</a>
            </div>
            <div class="menu">
              <a href="#">카페</a>
            </div>
                  
        </div>
    
        
    </section>
    <section id="down-mainfunc">
      <!-- 정렬 기능 아직, 링크만 걸어뒀어요 -->      
      <div class="sort_store"> 
        <a href="{% url 'map_main' %}">최신순</a>
        <a href="{% url 'map_main' %}">별점순</a>
        <!-- 이렇게 위로 두줄 링크 건 부분 -->
      </div>
      <div style=
      "overflow:scroll; width:410px; height:650px; padding:10px; background-color:rgb(83, 188, 78);  ">

          <div class="store_text">
            <a href="{% url 'map_main' %}"><p>여누</p></a>            
            <h4>평점 : 4.5<h4>
            <h4>충청북도 청주시 흥덕구 복대동 990번지 KR 1층<h4>
            <h4>매장 내 식사 / 테이크아웃 <h4>
          
            <a href="{% url 'map_main' %}"><p>오프리</p></a>            
            <h4>평점 : 4.9<h4>
            <h4>충청북도 청주시 흥덕구 가경동 번지 1층</h4>
            <h4>1929 KR 일부호<h4>
            <h4>매장 내 식사 / 테이크아웃 <h4>

            <a href="{% url 'map_main' %}"><p>늘푸른식당</p></a>            
            <h4>평점 : 3.8<h4>
            <h4>충청북도 청주시 상당구 우암동 325-6<h4>
            <h4>매장 내 식사 <h4>

            <a href="{% url 'map_main' %}"><p>스토리</p></a>            
            <h4>충청북도 청주시 흥덕구 복대2동<h4>

            <a href="{% url 'map_main' %}"><p>하일</p></a>            
            <h4>충청북도 청주시 상당구 북문로1가 번지 3층</h4>
            <h4> 4-1 KR 반비반트<h4>
            <h4>테이크아웃<h4>        

            <a href="{% url 'map_main' %}"><p>러빙헛</p></a>            
            <h4>평점 : 3.9<h4>
            <h4>채식(Vegan) / 대전광역시 대덕구 중리동 493-6<h4>
            <h4>매장 내 식사 / 테이크아웃 <h4>
    
            <a href="{% url 'map_main' %}"><p>비건바닐라</p></a>            
            <h4>평점 : 4.9<h4>
            <h4>제과점, 대전광역시 서구 갈마동 781<h4>
            <h4>테이크아웃 <h4>              

            <a href="{% url 'map_main' %}"><p>세이비건</p></a>      
            <h4>평점 : 5.0<h4>      
            <h4>식료품점, 대전광역시 유성구 노은2동 917-5<h4>
    
            <a href="{% url 'map_main' %}"><p>에이블리</p></a>            
            <h4>평점 : 4.0<h4>
            <h4>대전광역시 유성구 전민동 364-4번지 1층<h4>
            <h4>매장 내 식사 / 테이크아웃 <h4>
       
            <a href="{% url 'map_main' %}"><p>채식주의자의무화과</p></a>            
            <h4>평점 : 4.8<h4>
            <h4>전라북도 전주시 완산구 중화산동2가 번지 1층</h4>
            <h4> 20-10 KR<h4>
            <h4>매장 내 식사 / 테이크아웃 <h4>
          </div>
      </div>

  </section>   
</leftbody>

</html>  